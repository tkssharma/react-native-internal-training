{"ast":null,"code":"var _jsxFileName = \"/Users/srijan/react-native-internal-training/rn-native-app/node_modules/react-navigation-tabs/src/navigators/createMaterialTopTabNavigator.js\";\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { polyfill } from 'react-lifecycles-compat';\nimport { TabView, PagerPan } from 'react-native-tab-view';\nimport createTabNavigator from \"../utils/createTabNavigator\";\nimport MaterialTopTabBar from \"../views/MaterialTopTabBar\";\nimport ResourceSavingScene from \"../views/ResourceSavingScene\";\n\nclass MaterialTabView extends React.PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      index: 0,\n      isSwiping: false,\n      loaded: [this.props.navigation.state.index],\n      transitioningFromIndex: null\n    };\n\n    this._renderIcon = (_ref) => {\n      var {\n        focused,\n        route,\n        tintColor\n      } = _ref;\n      var {\n        descriptors\n      } = this.props;\n      var descriptor = descriptors[route.key];\n      var options = descriptor.options;\n\n      if (options.tabBarIcon) {\n        return typeof options.tabBarIcon === 'function' ? options.tabBarIcon({\n          tintColor,\n          focused\n        }) : options.tabBarIcon;\n      }\n\n      return null;\n    };\n\n    this._renderTabBar = props => {\n      var {\n        state\n      } = this.props.navigation;\n      var route = state.routes[state.index];\n      var {\n        descriptors\n      } = this.props;\n      var descriptor = descriptors[route.key];\n      var options = descriptor.options;\n      var tabBarVisible = options.tabBarVisible == null ? true : options.tabBarVisible;\n      var {\n        tabBarComponent: TabBarComponent = MaterialTopTabBar,\n        tabBarPosition,\n        tabBarOptions\n      } = this.props;\n\n      if (TabBarComponent === null || !tabBarVisible) {\n        return null;\n      }\n\n      return React.createElement(TabBarComponent, _extends({}, tabBarOptions, props, {\n        tabBarPosition: tabBarPosition,\n        screenProps: this.props.screenProps,\n        navigation: this.props.navigation,\n        getLabelText: this.props.getLabelText,\n        getAccessibilityLabel: this.props.getAccessibilityLabel,\n        getTestID: this.props.getTestID,\n        renderIcon: this._renderIcon,\n        onTabPress: this.props.onTabPress,\n        onTabLongPress: this.props.onTabLongPress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        }\n      }));\n    };\n\n    this._renderPanPager = props => React.createElement(PagerPan, _extends({}, props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      }\n    }));\n\n    this._handleAnimationEnd = () => {\n      var {\n        lazy\n      } = this.props;\n\n      if (lazy) {\n        this.setState({\n          transitioningFromIndex: null,\n          isSwiping: false\n        });\n      }\n    };\n\n    this._handleSwipeStart = () => {\n      var {\n        navigation,\n        lazy\n      } = this.props;\n\n      if (lazy) {\n        this.setState({\n          isSwiping: true,\n          loaded: [...new Set([...this.state.loaded, Math.max(navigation.state.index - 1, 0), Math.min(navigation.state.index + 1, navigation.state.routes.length - 1)])]\n        });\n      }\n    };\n\n    this._handleIndexChange = index => {\n      var {\n        animationEnabled,\n        navigation,\n        onIndexChange,\n        lazy\n      } = this.props;\n\n      if (lazy && animationEnabled) {\n        this.setState({\n          transitioningFromIndex: navigation.state.index || 0\n        });\n      }\n\n      onIndexChange(index);\n    };\n\n    this._mustBeVisible = (_ref2) => {\n      var {\n        index,\n        focused\n      } = _ref2;\n      var {\n        animationEnabled,\n        navigation\n      } = this.props;\n      var {\n        isSwiping,\n        transitioningFromIndex\n      } = this.state;\n\n      if (isSwiping) {\n        var isSibling = navigation.state.index === index - 1 || navigation.state.index === index + 1;\n\n        if (isSibling) {\n          return true;\n        }\n      }\n\n      if (animationEnabled && transitioningFromIndex === index) {\n        return true;\n      }\n\n      return focused;\n    };\n\n    this._renderScene = (_ref3) => {\n      var {\n        route\n      } = _ref3;\n      var {\n        renderScene,\n        descriptors,\n        lazy,\n        optimizationsEnabled\n      } = this.props;\n\n      if (lazy) {\n        var {\n          loaded\n        } = this.state;\n        var {\n          routes\n        } = this.props.navigation.state;\n        var index = routes.findIndex((_ref4) => {\n          var {\n            key\n          } = _ref4;\n          return key === route.key;\n        });\n        var {\n          navigation\n        } = descriptors[route.key];\n\n        var mustBeVisible = this._mustBeVisible({\n          index,\n          focused: navigation.isFocused()\n        });\n\n        if (!loaded.includes(index) && !mustBeVisible) {\n          return React.createElement(View, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 200\n            }\n          });\n        }\n\n        if (optimizationsEnabled) {\n          return React.createElement(ResourceSavingScene, {\n            isVisible: mustBeVisible,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 205\n            }\n          }, renderScene({\n            route\n          }));\n        }\n      }\n\n      return renderScene({\n        route\n      });\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    var {\n      index\n    } = nextProps.navigation.state;\n\n    if (prevState.index === index) {\n      return null;\n    }\n\n    return {\n      loaded: prevState.loaded.includes(index) ? prevState.loaded : [...prevState.loaded, index],\n      index\n    };\n  }\n\n  render() {\n    var _this$props = this.props,\n        {\n      navigation,\n      animationEnabled,\n      renderScene,\n      onIndexChange\n    } = _this$props,\n        rest = _objectWithoutProperties(_this$props, [\"navigation\", \"animationEnabled\", \"renderScene\", \"onIndexChange\"]);\n\n    var renderPager = rest.renderPager;\n    var {\n      state\n    } = this.props.navigation;\n    var route = state.routes[state.index];\n    var {\n      descriptors\n    } = this.props;\n    var descriptor = descriptors[route.key];\n    var options = descriptor.options;\n    var swipeEnabled = options.swipeEnabled == null ? this.props.swipeEnabled : options.swipeEnabled;\n\n    if (typeof swipeEnabled === 'function') {\n      swipeEnabled = swipeEnabled(state);\n    }\n\n    if (animationEnabled === false && swipeEnabled === false) {\n      renderPager = this._renderPanPager;\n    }\n\n    return React.createElement(TabView, _extends({}, rest, {\n      navigationState: navigation.state,\n      animationEnabled: animationEnabled,\n      swipeEnabled: swipeEnabled,\n      onAnimationEnd: this._handleAnimationEnd,\n      onIndexChange: this._handleIndexChange,\n      onSwipeStart: this._handleSwipeStart,\n      renderPager: renderPager,\n      renderTabBar: this._renderTabBar,\n      renderScene: this._renderScene,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      }\n    }));\n  }\n\n}\n\nMaterialTabView.defaultProps = {\n  initialLayout: Platform.select({\n    android: {\n      width: 1,\n      height: 0\n    }\n  }),\n  animationEnabled: true,\n  lazy: false,\n  optimizationsEnabled: false\n};\npolyfill(MaterialTabView);\nexport default createTabNavigator(MaterialTabView);","map":{"version":3,"sources":["/Users/srijan/react-native-internal-training/rn-native-app/node_modules/react-navigation-tabs/src/navigators/createMaterialTopTabNavigator.js"],"names":["React","polyfill","TabView","PagerPan","createTabNavigator","MaterialTopTabBar","ResourceSavingScene","MaterialTabView","PureComponent","state","index","isSwiping","loaded","props","navigation","transitioningFromIndex","_renderIcon","focused","route","tintColor","descriptors","descriptor","key","options","tabBarIcon","_renderTabBar","routes","tabBarVisible","tabBarComponent","TabBarComponent","tabBarPosition","tabBarOptions","screenProps","getLabelText","getAccessibilityLabel","getTestID","onTabPress","onTabLongPress","_renderPanPager","_handleAnimationEnd","lazy","setState","_handleSwipeStart","Set","Math","max","min","length","_handleIndexChange","animationEnabled","onIndexChange","_mustBeVisible","isSibling","_renderScene","renderScene","optimizationsEnabled","findIndex","mustBeVisible","isFocused","includes","getDerivedStateFromProps","nextProps","prevState","render","rest","renderPager","swipeEnabled","defaultProps","initialLayout","Platform","select","android","width","height"],"mappings":";;;;;;;;AAEA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;;;AAEA,SAASC,QAAT,QAAyB,yBAAzB;AACA,SAASC,OAAT,EAAkBC,QAAlB,QAAkC,uBAAlC;AACA,OAAOC,kBAAP;AAGA,OAAOC,iBAAP;AAGA,OAAOC,mBAAP;;AAoBA,MAAMC,eAAN,SAA8BP,KAAK,CAACQ,aAApC,CAAgE;AAAA;AAAA;AAAA,SA0B9DC,KA1B8D,GA0BtD;AACNC,MAAAA,KAAK,EAAE,CADD;AAENC,MAAAA,SAAS,EAAE,KAFL;AAGNC,MAAAA,MAAM,EAAE,CAAC,KAAKC,KAAL,CAAWC,UAAX,CAAsBL,KAAtB,CAA4BC,KAA7B,CAHF;AAINK,MAAAA,sBAAsB,EAAE;AAJlB,KA1BsD;;AAAA,SAiC9DC,WAjC8D,GAiChD,UAAmC;AAAA,UAAlC;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,KAAX;AAAkBC,QAAAA;AAAlB,OAAkC;AAC/C,UAAM;AAAEC,QAAAA;AAAF,UAAkB,KAAKP,KAA7B;AACA,UAAMQ,UAAU,GAAGD,WAAW,CAACF,KAAK,CAACI,GAAP,CAA9B;AACA,UAAMC,OAAO,GAAGF,UAAU,CAACE,OAA3B;;AAEA,UAAIA,OAAO,CAACC,UAAZ,EAAwB;AACtB,eAAO,OAAOD,OAAO,CAACC,UAAf,KAA8B,UAA9B,GACHD,OAAO,CAACC,UAAR,CAAmB;AAAEL,UAAAA,SAAF;AAAaF,UAAAA;AAAb,SAAnB,CADG,GAEHM,OAAO,CAACC,UAFZ;AAGD;;AAED,aAAO,IAAP;AACD,KA7C6D;;AAAA,SA+C9DC,aA/C8D,GA+C9CZ,KAAK,IAAI;AACvB,UAAM;AAAEJ,QAAAA;AAAF,UAAY,KAAKI,KAAL,CAAWC,UAA7B;AACA,UAAMI,KAAK,GAAGT,KAAK,CAACiB,MAAN,CAAajB,KAAK,CAACC,KAAnB,CAAd;AACA,UAAM;AAAEU,QAAAA;AAAF,UAAkB,KAAKP,KAA7B;AACA,UAAMQ,UAAU,GAAGD,WAAW,CAACF,KAAK,CAACI,GAAP,CAA9B;AACA,UAAMC,OAAO,GAAGF,UAAU,CAACE,OAA3B;AAEA,UAAMI,aAAa,GACjBJ,OAAO,CAACI,aAAR,IAAyB,IAAzB,GAAgC,IAAhC,GAAuCJ,OAAO,CAACI,aADjD;AAGA,UAAM;AACJC,QAAAA,eAAe,EAAEC,eAAe,GAAGxB,iBAD/B;AAEJyB,QAAAA,cAFI;AAGJC,QAAAA;AAHI,UAIF,KAAKlB,KAJT;;AAMA,UAAIgB,eAAe,KAAK,IAApB,IAA4B,CAACF,aAAjC,EAAgD;AAC9C,eAAO,IAAP;AACD;;AAED,aAEE,oBAAC,eAAD,eACMI,aADN,EAEMlB,KAFN;AAGE,QAAA,cAAc,EAAEiB,cAHlB;AAIE,QAAA,WAAW,EAAE,KAAKjB,KAAL,CAAWmB,WAJ1B;AAKE,QAAA,UAAU,EAAE,KAAKnB,KAAL,CAAWC,UALzB;AAME,QAAA,YAAY,EAAE,KAAKD,KAAL,CAAWoB,YAN3B;AAOE,QAAA,qBAAqB,EAAE,KAAKpB,KAAL,CAAWqB,qBAPpC;AAQE,QAAA,SAAS,EAAE,KAAKrB,KAAL,CAAWsB,SARxB;AASE,QAAA,UAAU,EAAE,KAAKnB,WATnB;AAUE,QAAA,UAAU,EAAE,KAAKH,KAAL,CAAWuB,UAVzB;AAWE,QAAA,cAAc,EAAE,KAAKvB,KAAL,CAAWwB,cAX7B;AAAA;AAAA;AAAA;AAAA;AAAA,SAFF;AAgBD,KAnF6D;;AAAA,SAqF9DC,eArF8D,GAqF5CzB,KAAK,IAAI,oBAAC,QAAD,eAAcA,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA,OArFmC;;AAAA,SAuF9D0B,mBAvF8D,GAuFxC,MAAM;AAC1B,UAAM;AAAEC,QAAAA;AAAF,UAAW,KAAK3B,KAAtB;;AAEA,UAAI2B,IAAJ,EAAU;AACR,aAAKC,QAAL,CAAc;AACZ1B,UAAAA,sBAAsB,EAAE,IADZ;AAEZJ,UAAAA,SAAS,EAAE;AAFC,SAAd;AAID;AACF,KAhG6D;;AAAA,SAkG9D+B,iBAlG8D,GAkG1C,MAAM;AACxB,UAAM;AAAE5B,QAAAA,UAAF;AAAc0B,QAAAA;AAAd,UAAuB,KAAK3B,KAAlC;;AAEA,UAAI2B,IAAJ,EAAU;AACR,aAAKC,QAAL,CAAc;AACZ9B,UAAAA,SAAS,EAAE,IADC;AAEZC,UAAAA,MAAM,EAAE,CACN,GAAG,IAAI+B,GAAJ,CAAQ,CACT,GAAG,KAAKlC,KAAL,CAAWG,MADL,EAETgC,IAAI,CAACC,GAAL,CAAS/B,UAAU,CAACL,KAAX,CAAiBC,KAAjB,GAAyB,CAAlC,EAAqC,CAArC,CAFS,EAGTkC,IAAI,CAACE,GAAL,CACEhC,UAAU,CAACL,KAAX,CAAiBC,KAAjB,GAAyB,CAD3B,EAEEI,UAAU,CAACL,KAAX,CAAiBiB,MAAjB,CAAwBqB,MAAxB,GAAiC,CAFnC,CAHS,CAAR,CADG;AAFI,SAAd;AAaD;AACF,KApH6D;;AAAA,SAsH9DC,kBAtH8D,GAsHzCtC,KAAK,IAAI;AAC5B,UAAM;AAAEuC,QAAAA,gBAAF;AAAoBnC,QAAAA,UAApB;AAAgCoC,QAAAA,aAAhC;AAA+CV,QAAAA;AAA/C,UAAwD,KAAK3B,KAAnE;;AAEA,UAAI2B,IAAI,IAAIS,gBAAZ,EAA8B;AAC5B,aAAKR,QAAL,CAAc;AACZ1B,UAAAA,sBAAsB,EAAED,UAAU,CAACL,KAAX,CAAiBC,KAAjB,IAA0B;AADtC,SAAd;AAGD;;AAEDwC,MAAAA,aAAa,CAACxC,KAAD,CAAb;AACD,KAhI6D;;AAAA,SAkI9DyC,cAlI8D,GAkI7C,WAAwB;AAAA,UAAvB;AAAEzC,QAAAA,KAAF;AAASO,QAAAA;AAAT,OAAuB;AACvC,UAAM;AAAEgC,QAAAA,gBAAF;AAAoBnC,QAAAA;AAApB,UAAmC,KAAKD,KAA9C;AACA,UAAM;AAAEF,QAAAA,SAAF;AAAaI,QAAAA;AAAb,UAAwC,KAAKN,KAAnD;;AAEA,UAAIE,SAAJ,EAAe;AACb,YAAMyC,SAAS,GACbtC,UAAU,CAACL,KAAX,CAAiBC,KAAjB,KAA2BA,KAAK,GAAG,CAAnC,IACAI,UAAU,CAACL,KAAX,CAAiBC,KAAjB,KAA2BA,KAAK,GAAG,CAFrC;;AAIA,YAAI0C,SAAJ,EAAe;AACb,iBAAO,IAAP;AACD;AACF;;AAGD,UAAIH,gBAAgB,IAAIlC,sBAAsB,KAAKL,KAAnD,EAA0D;AACxD,eAAO,IAAP;AACD;;AAED,aAAOO,OAAP;AACD,KAtJ6D;;AAAA,SAwJ9DoC,YAxJ8D,GAwJ/C,WAAe;AAAA,UAAd;AAAEnC,QAAAA;AAAF,OAAc;AAC5B,UAAM;AAAEoC,QAAAA,WAAF;AAAelC,QAAAA,WAAf;AAA4BoB,QAAAA,IAA5B;AAAkCe,QAAAA;AAAlC,UAA2D,KAAK1C,KAAtE;;AAEA,UAAI2B,IAAJ,EAAU;AACR,YAAM;AAAE5B,UAAAA;AAAF,YAAa,KAAKH,KAAxB;AACA,YAAM;AAAEiB,UAAAA;AAAF,YAAa,KAAKb,KAAL,CAAWC,UAAX,CAAsBL,KAAzC;AACA,YAAMC,KAAK,GAAGgB,MAAM,CAAC8B,SAAP,CAAiB;AAAA,cAAC;AAAElC,YAAAA;AAAF,WAAD;AAAA,iBAAaA,GAAG,KAAKJ,KAAK,CAACI,GAA3B;AAAA,SAAjB,CAAd;AACA,YAAM;AAAER,UAAAA;AAAF,YAAiBM,WAAW,CAACF,KAAK,CAACI,GAAP,CAAlC;;AAEA,YAAMmC,aAAa,GAAG,KAAKN,cAAL,CAAoB;AACxCzC,UAAAA,KADwC;AAExCO,UAAAA,OAAO,EAAEH,UAAU,CAAC4C,SAAX;AAF+B,SAApB,CAAtB;;AAKA,YAAI,CAAC9C,MAAM,CAAC+C,QAAP,CAAgBjD,KAAhB,CAAD,IAA2B,CAAC+C,aAAhC,EAA+C;AAC7C,iBAAO,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACD;;AAED,YAAIF,oBAAJ,EAA0B;AACxB,iBACE,oBAAC,mBAAD;AAAqB,YAAA,SAAS,EAAEE,aAAhC;AAAA;AAAA;AAAA;AAAA;AAAA,aACGH,WAAW,CAAC;AAAEpC,YAAAA;AAAF,WAAD,CADd,CADF;AAKD;AACF;;AAED,aAAOoC,WAAW,CAAC;AAAEpC,QAAAA;AAAF,OAAD,CAAlB;AACD,KApL6D;AAAA;;AAW9D,SAAO0C,wBAAP,CAAgCC,SAAhC,EAA2CC,SAA3C,EAAsD;AACpD,QAAM;AAAEpD,MAAAA;AAAF,QAAYmD,SAAS,CAAC/C,UAAV,CAAqBL,KAAvC;;AAEA,QAAIqD,SAAS,CAACpD,KAAV,KAAoBA,KAAxB,EAA+B;AAC7B,aAAO,IAAP;AACD;;AAED,WAAO;AACLE,MAAAA,MAAM,EAAEkD,SAAS,CAAClD,MAAV,CAAiB+C,QAAjB,CAA0BjD,KAA1B,IACJoD,SAAS,CAAClD,MADN,GAEJ,CAAC,GAAGkD,SAAS,CAAClD,MAAd,EAAsBF,KAAtB,CAHC;AAILA,MAAAA;AAJK,KAAP;AAMD;;AA8JDqD,EAAAA,MAAM,GAAG;AACP,sBAQI,KAAKlD,KART;AAAA,QAAM;AACJC,MAAAA,UADI;AAEJmC,MAAAA,gBAFI;AAIJK,MAAAA,WAJI;AAMJJ,MAAAA;AANI,KAAN;AAAA,QAOKc,IAPL;;AAUA,QAAIC,WAAW,GAAGD,IAAI,CAACC,WAAvB;AAEA,QAAM;AAAExD,MAAAA;AAAF,QAAY,KAAKI,KAAL,CAAWC,UAA7B;AACA,QAAMI,KAAK,GAAGT,KAAK,CAACiB,MAAN,CAAajB,KAAK,CAACC,KAAnB,CAAd;AACA,QAAM;AAAEU,MAAAA;AAAF,QAAkB,KAAKP,KAA7B;AACA,QAAMQ,UAAU,GAAGD,WAAW,CAACF,KAAK,CAACI,GAAP,CAA9B;AACA,QAAMC,OAAO,GAAGF,UAAU,CAACE,OAA3B;AAEA,QAAI2C,YAAY,GACd3C,OAAO,CAAC2C,YAAR,IAAwB,IAAxB,GACI,KAAKrD,KAAL,CAAWqD,YADf,GAEI3C,OAAO,CAAC2C,YAHd;;AAKA,QAAI,OAAOA,YAAP,KAAwB,UAA5B,EAAwC;AACtCA,MAAAA,YAAY,GAAGA,YAAY,CAACzD,KAAD,CAA3B;AACD;;AAED,QAAIwC,gBAAgB,KAAK,KAArB,IAA8BiB,YAAY,KAAK,KAAnD,EAA0D;AACxDD,MAAAA,WAAW,GAAG,KAAK3B,eAAnB;AACD;;AAED,WACE,oBAAC,OAAD,eACM0B,IADN;AAEE,MAAA,eAAe,EAAElD,UAAU,CAACL,KAF9B;AAGE,MAAA,gBAAgB,EAAEwC,gBAHpB;AAIE,MAAA,YAAY,EAAEiB,YAJhB;AAKE,MAAA,cAAc,EAAE,KAAK3B,mBALvB;AAME,MAAA,aAAa,EAAE,KAAKS,kBANtB;AAOE,MAAA,YAAY,EAAE,KAAKN,iBAPrB;AAQE,MAAA,WAAW,EAAEuB,WARf;AASE,MAAA,YAAY,EAAE,KAAKxC,aATrB;AAUE,MAAA,WAAW,EAET,KAAK4B,YAZT;AAAA;AAAA;AAAA;AAAA;AAAA,OADF;AAiBD;;AAvO6D;;AAA1D9C,e,CACG4D,Y,GAAe;AAEpBC,EAAAA,aAAa,EAAEC,QAAQ,CAACC,MAAT,CAAgB;AAC7BC,IAAAA,OAAO,EAAE;AAAEC,MAAAA,KAAK,EAAE,CAAT;AAAYC,MAAAA,MAAM,EAAE;AAApB;AADoB,GAAhB,CAFK;AAKpBxB,EAAAA,gBAAgB,EAAE,IALE;AAMpBT,EAAAA,IAAI,EAAE,KANc;AAOpBe,EAAAA,oBAAoB,EAAE;AAPF,C;AAyOxBtD,QAAQ,CAACM,eAAD,CAAR;AAEA,eAAeH,kBAAkB,CAACG,eAAD,CAAjC","sourcesContent":["/* @flow */\n\nimport * as React from 'react';\nimport { View, Platform } from 'react-native';\nimport { polyfill } from 'react-lifecycles-compat';\nimport { TabView, PagerPan } from 'react-native-tab-view';\nimport createTabNavigator, {\n  type InjectedProps,\n} from '../utils/createTabNavigator';\nimport MaterialTopTabBar, {\n  type TabBarOptions,\n} from '../views/MaterialTopTabBar';\nimport ResourceSavingScene from '../views/ResourceSavingScene';\n\ntype Props = InjectedProps & {\n  animationEnabled?: boolean,\n  lazy?: boolean,\n  optimizationsEnabled?: boolean,\n  swipeEnabled?: boolean,\n  renderPager?: (props: *) => React.Node,\n  tabBarComponent?: React.ComponentType<*>,\n  tabBarOptions?: TabBarOptions,\n  tabBarPosition?: 'top' | 'bottom',\n};\n\ntype State = {\n  index: number,\n  isSwiping: boolean,\n  loaded: Array<number>,\n  transitioningFromIndex: ?number,\n};\n\nclass MaterialTabView extends React.PureComponent<Props, State> {\n  static defaultProps = {\n    // fix for https://github.com/react-native-community/react-native-tab-view/issues/312\n    initialLayout: Platform.select({\n      android: { width: 1, height: 0 },\n    }),\n    animationEnabled: true,\n    lazy: false,\n    optimizationsEnabled: false,\n  };\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { index } = nextProps.navigation.state;\n\n    if (prevState.index === index) {\n      return null;\n    }\n\n    return {\n      loaded: prevState.loaded.includes(index)\n        ? prevState.loaded\n        : [...prevState.loaded, index],\n      index,\n    };\n  }\n\n  state = {\n    index: 0,\n    isSwiping: false,\n    loaded: [this.props.navigation.state.index],\n    transitioningFromIndex: null,\n  };\n\n  _renderIcon = ({ focused, route, tintColor }) => {\n    const { descriptors } = this.props;\n    const descriptor = descriptors[route.key];\n    const options = descriptor.options;\n\n    if (options.tabBarIcon) {\n      return typeof options.tabBarIcon === 'function'\n        ? options.tabBarIcon({ tintColor, focused })\n        : options.tabBarIcon;\n    }\n\n    return null;\n  };\n\n  _renderTabBar = props => {\n    const { state } = this.props.navigation;\n    const route = state.routes[state.index];\n    const { descriptors } = this.props;\n    const descriptor = descriptors[route.key];\n    const options = descriptor.options;\n\n    const tabBarVisible =\n      options.tabBarVisible == null ? true : options.tabBarVisible;\n\n    const {\n      tabBarComponent: TabBarComponent = MaterialTopTabBar,\n      tabBarPosition,\n      tabBarOptions,\n    } = this.props;\n\n    if (TabBarComponent === null || !tabBarVisible) {\n      return null;\n    }\n\n    return (\n      /* $FlowFixMe */\n      <TabBarComponent\n        {...tabBarOptions}\n        {...props}\n        tabBarPosition={tabBarPosition}\n        screenProps={this.props.screenProps}\n        navigation={this.props.navigation}\n        getLabelText={this.props.getLabelText}\n        getAccessibilityLabel={this.props.getAccessibilityLabel}\n        getTestID={this.props.getTestID}\n        renderIcon={this._renderIcon}\n        onTabPress={this.props.onTabPress}\n        onTabLongPress={this.props.onTabLongPress}\n      />\n    );\n  };\n\n  _renderPanPager = props => <PagerPan {...props} />;\n\n  _handleAnimationEnd = () => {\n    const { lazy } = this.props;\n\n    if (lazy) {\n      this.setState({\n        transitioningFromIndex: null,\n        isSwiping: false,\n      });\n    }\n  };\n\n  _handleSwipeStart = () => {\n    const { navigation, lazy } = this.props;\n\n    if (lazy) {\n      this.setState({\n        isSwiping: true,\n        loaded: [\n          ...new Set([\n            ...this.state.loaded,\n            Math.max(navigation.state.index - 1, 0),\n            Math.min(\n              navigation.state.index + 1,\n              navigation.state.routes.length - 1\n            ),\n          ]),\n        ],\n      });\n    }\n  };\n\n  _handleIndexChange = index => {\n    const { animationEnabled, navigation, onIndexChange, lazy } = this.props;\n\n    if (lazy && animationEnabled) {\n      this.setState({\n        transitioningFromIndex: navigation.state.index || 0,\n      });\n    }\n\n    onIndexChange(index);\n  };\n\n  _mustBeVisible = ({ index, focused }) => {\n    const { animationEnabled, navigation } = this.props;\n    const { isSwiping, transitioningFromIndex } = this.state;\n\n    if (isSwiping) {\n      const isSibling =\n        navigation.state.index === index - 1 ||\n        navigation.state.index === index + 1;\n\n      if (isSibling) {\n        return true;\n      }\n    }\n\n    // The previous tab should remain visible while transitioning\n    if (animationEnabled && transitioningFromIndex === index) {\n      return true;\n    }\n\n    return focused;\n  };\n\n  _renderScene = ({ route }) => {\n    const { renderScene, descriptors, lazy, optimizationsEnabled } = this.props;\n\n    if (lazy) {\n      const { loaded } = this.state;\n      const { routes } = this.props.navigation.state;\n      const index = routes.findIndex(({ key }) => key === route.key);\n      const { navigation } = descriptors[route.key];\n\n      const mustBeVisible = this._mustBeVisible({\n        index,\n        focused: navigation.isFocused(),\n      });\n\n      if (!loaded.includes(index) && !mustBeVisible) {\n        return <View />;\n      }\n\n      if (optimizationsEnabled) {\n        return (\n          <ResourceSavingScene isVisible={mustBeVisible}>\n            {renderScene({ route })}\n          </ResourceSavingScene>\n        );\n      }\n    }\n\n    return renderScene({ route });\n  };\n\n  render() {\n    const {\n      navigation,\n      animationEnabled,\n      // eslint-disable-next-line no-unused-vars\n      renderScene,\n      // eslint-disable-next-line no-unused-vars\n      onIndexChange,\n      ...rest\n    } = this.props;\n\n    let renderPager = rest.renderPager;\n\n    const { state } = this.props.navigation;\n    const route = state.routes[state.index];\n    const { descriptors } = this.props;\n    const descriptor = descriptors[route.key];\n    const options = descriptor.options;\n\n    let swipeEnabled =\n      options.swipeEnabled == null\n        ? this.props.swipeEnabled\n        : options.swipeEnabled;\n\n    if (typeof swipeEnabled === 'function') {\n      swipeEnabled = swipeEnabled(state);\n    }\n\n    if (animationEnabled === false && swipeEnabled === false) {\n      renderPager = this._renderPanPager;\n    }\n\n    return (\n      <TabView\n        {...rest}\n        navigationState={navigation.state}\n        animationEnabled={animationEnabled}\n        swipeEnabled={swipeEnabled}\n        onAnimationEnd={this._handleAnimationEnd}\n        onIndexChange={this._handleIndexChange}\n        onSwipeStart={this._handleSwipeStart}\n        renderPager={renderPager}\n        renderTabBar={this._renderTabBar}\n        renderScene={\n          /* $FlowFixMe */\n          this._renderScene\n        }\n      />\n    );\n  }\n}\n\npolyfill(MaterialTabView);\n\nexport default createTabNavigator(MaterialTabView);\n"]},"metadata":{},"sourceType":"module"}